//
//  AylaSDK
//
//  Copyright Â© 2016 Ayla Networks. All rights reserved.
//

#import "AylaDefines.h"
#import "AylaObject.h"

NS_ASSUME_NONNULL_BEGIN
/**
 * Describes a a single datapoint, a value at a point in time, for an `AylaProperty`.
 */
@interface AylaDatapoint : AylaObject

/** @name Datapoint Properties */

/** ID of datapoint */
@property (nonatomic, strong, readonly, nullable) NSString *id;

/** Value of datapoint */
@property (nonatomic, copy, readonly) id value;

/** Dictionary of metadata */
@property (nonatomic, strong, readonly, nullable) NSDictionary *metadata;

/** When datapoint is created. */
@property (nonatomic, strong, readonly, nullable) NSDate *createdAt;

/** Lastest updated time */
@property (nonatomic, strong, readonly, nullable) NSDate *updatedAt;

/** Timestamp indicating when datapoint ack is received. */
@property (nonatomic, strong, readonly, nullable) NSDate *ackedAt;

/** Datapoint ack status */
@property (nonatomic, assign, readonly) NSInteger ackStatus;

/** Datapoint ack message */
@property (nonatomic, assign, readonly) NSInteger ackMessage;
    
/**
 Echo is an indication of the source, set by the device for ToDevice properties. If set to 1, it indicates the datapoint value was created on device by the user hitting a button, a schedule firing, or the host app. If set to 0, it indicates the datapoint was created on the cloud or mobile. A typical use case is the user hits a button to increase the temperature on a T-Stat. The datapoint would be sent to the cloud with the echo flag set to 1.
 */
@property (nonatomic, assign, readonly, getter=isEcho) BOOL echo;

/** Created at time generated by device */
@property (nonatomic, strong, readonly, nullable) NSDate *createdAtFromDevice;

/** Data source of this datapoint */
@property (nonatomic, assign, readonly) AylaDataSource dataSource;

/** Method Unavailable. Do not use. (Marked NS_UNAVAILABLE) */
- (instancetype)init NS_UNAVAILABLE;


/**
 Initializes the datapoint with a value

 @param value The value
 @return An initialized datapoint
 */
- (instancetype)initWithValue:(id)value;
@end

@interface AylaDatapoint (NSCoding)<NSCoding>

@end
NS_ASSUME_NONNULL_END
